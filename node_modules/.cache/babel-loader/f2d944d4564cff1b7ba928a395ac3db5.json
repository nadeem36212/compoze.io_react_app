{"ast":null,"code":"import _regeneratorRuntime from \"/Users/naeem/syntaxroot/compoze.io_react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/naeem/syntaxroot/compoze.io_react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/naeem/syntaxroot/compoze.io_react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/naeem/syntaxroot/compoze.io_react_app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nvar ProductService = /*#__PURE__*/function () {\n  function ProductService(http, authService, baseUri) {\n    _classCallCheck(this, ProductService);\n    this.http = http;\n    this.authService = authService;\n    this.baseUri = baseUri;\n  }\n  _createClass(ProductService, [{\n    key: \"getProducts\",\n    value: function () {\n      var _getProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var url, headers;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = this.createURL('/products');\n                _context.t0 = Object;\n                _context.t1 = this.getHeaders();\n                _context.next = 5;\n                return this.getHeaders();\n              case 5:\n                _context.t2 = _context.sent;\n                headers = _context.t0.assign.call(_context.t0, _context.t1, _context.t2);\n                _context.next = 9;\n                return this.http.get(url, {\n                  headers: headers\n                });\n              case 9:\n                _context.next = 11;\n                return _context.sent.data;\n              case 11:\n                return _context.abrupt(\"return\", _context.sent);\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getProducts() {\n        return _getProducts.apply(this, arguments);\n      }\n      return getProducts;\n    }() // export interface VPCProps {\n    //     openVpnUserName: string,\n    //     openVpnUserPassword: string\n    //     compozeEnvironment: string,\n    //     compozeProductName: string,\n    // }\n  }, {\n    key: \"createProduct\",\n    value: function () {\n      var _createProduct = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name, accountId, region, environments, createVpc, githubOrganization) {\n        var url, headers;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                url = this.createURL(\"/accounts/\".concat(accountId, \"/products\"));\n                _context2.t0 = Object;\n                _context2.t1 = this.getHeaders();\n                _context2.next = 5;\n                return this.getHeaders();\n              case 5:\n                _context2.t2 = _context2.sent;\n                headers = _context2.t0.assign.call(_context2.t0, _context2.t1, _context2.t2);\n                _context2.next = 9;\n                return this.http.post(url, {\n                  name: name,\n                  githubOrganization: githubOrganization,\n                  region: region,\n                  environments: environments,\n                  createVpc: createVpc\n                }, {\n                  headers: headers\n                });\n              case 9:\n                _context2.next = 11;\n                return _context2.sent.data;\n              case 11:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function createProduct(_x, _x2, _x3, _x4, _x5, _x6) {\n        return _createProduct.apply(this, arguments);\n      }\n      return createProduct;\n    }()\n  }, {\n    key: \"getComponents\",\n    value: function () {\n      var _getComponents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productName) {\n        var url, headers;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                url = this.createURL(\"/products/\".concat(productName, \"/components\"));\n                _context3.t0 = Object;\n                _context3.t1 = this.getHeaders();\n                _context3.next = 5;\n                return this.getHeaders();\n              case 5:\n                _context3.t2 = _context3.sent;\n                headers = _context3.t0.assign.call(_context3.t0, _context3.t1, _context3.t2);\n                _context3.next = 9;\n                return this.http.get(url, {\n                  headers: headers\n                });\n              case 9:\n                _context3.next = 11;\n                return _context3.sent.data;\n              case 11:\n                return _context3.abrupt(\"return\", _context3.sent);\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function getComponents(_x7) {\n        return _getComponents.apply(this, arguments);\n      }\n      return getComponents;\n    }()\n  }, {\n    key: \"createURL\",\n    value: function createURL(urlPath) {\n      return this.baseUri + urlPath;\n    }\n  }, {\n    key: \"getHeaders\",\n    value: function () {\n      var _getHeaders = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var Authorization;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.authService.getToken();\n              case 2:\n                Authorization = _context4.sent;\n                return _context4.abrupt(\"return\", Authorization ? {\n                  Authorization: Authorization,\n                  gitUser: \"hello\",\n                  githubToken: \"world\"\n                } : {});\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n      function getHeaders() {\n        return _getHeaders.apply(this, arguments);\n      }\n      return getHeaders;\n    }()\n  }]);\n  return ProductService;\n}();\nexport { ProductService as default };","map":{"version":3,"names":["ProductService","http","authService","baseUri","url","createURL","Object","getHeaders","headers","assign","get","data","name","accountId","region","environments","createVpc","githubOrganization","post","productName","urlPath","getToken","Authorization","gitUser","githubToken"],"sources":["/Users/naeem/syntaxroot/compoze.io_react_app/src/service/productService.ts"],"sourcesContent":["import { AxiosInstance } from \"axios\";\nimport { Component } from \"../features/component/componentSlice\";\nimport { ProductInformation } from \"../features/products/productSlice\";\nimport AuthService from \"./authService\";\n\nexport default class ProductService {\n    constructor(\n        protected readonly http: AxiosInstance,\n        protected readonly authService: AuthService,\n        protected readonly baseUri: string\n    ) { }\n    async getProducts(): Promise<ProductInformation[]> {\n        const url = this.createURL('/products');\n\n        const headers = Object.assign(this.getHeaders(), await this.getHeaders());\n\n        return await (await this.http.get<ProductInformation[]>(\n            url,\n            { headers }\n        )).data;\n    }\n\n    // export interface VPCProps {\n    //     openVpnUserName: string,\n    //     openVpnUserPassword: string\n    //     compozeEnvironment: string,\n    //     compozeProductName: string,\n    // }\n\n    async createProduct(name: string,\n        accountId: string,\n        region: string,\n        environments: string[],\n        createVpc: boolean,\n        githubOrganization?: string,): Promise<ProductInformation> {\n        const url = this.createURL(`/accounts/${accountId}/products`);\n        const headers = Object.assign(this.getHeaders(), await this.getHeaders());\n\n        return await (await this.http.post<ProductInformation>(\n            url,\n            {\n                name,\n                githubOrganization,\n                region,\n                environments,\n                createVpc,\n            },\n            { headers }\n        )).data;\n    }\n\n    async getComponents(productName: string): Promise<Component[]> {\n        const url = this.createURL(`/products/${productName}/components`);\n\n        const headers = Object.assign(this.getHeaders(), await this.getHeaders());\n\n        return await (await this.http.get<Component[]>(\n            url,\n            { headers }\n        )).data;\n    }\n\n\n    private createURL(urlPath: string): string {\n        return this.baseUri + urlPath;\n    }\n\n\n    private async getHeaders(): Promise<any> {\n        const Authorization = await this.authService.getToken();\n        return Authorization ? { Authorization, gitUser: \"hello\", githubToken: \"world\" } : {};\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}