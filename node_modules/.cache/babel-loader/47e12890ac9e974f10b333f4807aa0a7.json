{"ast":null,"code":"import _regeneratorRuntime from \"/Users/naeem/syntaxroot/costdashboard-fe-redesign/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/naeem/syntaxroot/costdashboard-fe-redesign/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/naeem/syntaxroot/costdashboard-fe-redesign/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/naeem/syntaxroot/costdashboard-fe-redesign/src/features/organization/Organization.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Form } from 'react-bootstrap';\nimport { Button, Spinner } from '@chakra-ui/react';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { DataTable } from '../../components/Table';\nimport NavBar from '../../navigation/navbar';\nimport { createUser, fetchOrganization, selectOrgState } from './organizationSlice';\nimport { isFulfilled } from '@reduxjs/toolkit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OrganizationPage() {\n  _s();\n  var organization = useAppSelector(selectOrgState);\n  var dispatch = useAppDispatch();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    userName = _useState2[0],\n    setUserName = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  var columns = React.useMemo(function () {\n    return [{\n      Header: 'UserName',\n      accessor: 'userName'\n    }];\n  }, []);\n  function validateForm() {\n    return validateEmail(userName);\n  }\n  var validateEmail = function validateEmail(email) {\n    return String(email).toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n  };\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n      var action, fulfilled;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              event.preventDefault();\n              _context.next = 4;\n              return dispatch(createUser({\n                orgId: organization === null || organization === void 0 ? void 0 : organization.orgId,\n                userName: userName\n              }));\n            case 4:\n              action = _context.sent;\n              setIsLoading(false);\n              fulfilled = isFulfilled(action);\n              if (!fulfilled) {\n                _context.next = 14;\n                break;\n              }\n              alert('Successfully added user');\n              _context.next = 11;\n              return dispatch(fetchOrganization());\n            case 11:\n              setUserName('');\n              _context.next = 15;\n              break;\n            case 14:\n              alert('There was a problem adding the user, please try again');\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n  useEffect(function () {\n    dispatch(fetchOrganization());\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Organization container py-3\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), organization ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(DataTable, {\n        title: \"Compoze Labs Users\",\n        columns: columns,\n        data: organization.users,\n        onClick: function onClick() {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"accountId\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n            children: [' ', \"We'll send an email to this address to signup for the Compoze Platform\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            autoFocus: true,\n            type: \"userName\",\n            value: userName,\n            onChange: function onChange(e) {\n              return setUserName(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          isLoading: isLoading,\n          className: \"addButton\",\n          type: \"submit\",\n          disabled: !validateForm(),\n          children: \"Send Invite\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Loading \", /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(OrganizationPage, \"q2nysvnP15ZcrgZnWCcw3u00H2o=\", false, function () {\n  return [useAppSelector, useAppDispatch];\n});\n_c = OrganizationPage;\nvar _c;\n$RefreshReg$(_c, \"OrganizationPage\");","map":{"version":3,"names":["React","useEffect","useState","Form","Button","Spinner","useAppDispatch","useAppSelector","DataTable","NavBar","createUser","fetchOrganization","selectOrgState","isFulfilled","OrganizationPage","organization","dispatch","userName","setUserName","isLoading","setIsLoading","columns","useMemo","Header","accessor","validateForm","validateEmail","email","String","toLowerCase","match","handleSubmit","event","preventDefault","orgId","action","fulfilled","alert","users","e","target","value"],"sources":["/Users/naeem/syntaxroot/costdashboard-fe-redesign/src/features/organization/Organization.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form } from 'react-bootstrap';\nimport { Button, Spinner } from '@chakra-ui/react';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { DataTable } from '../../components/Table';\nimport NavBar from '../../navigation/navbar';\nimport {\n  createUser,\n  fetchOrganization,\n  Organization,\n  selectOrgState,\n} from './organizationSlice';\nimport { isFulfilled } from '@reduxjs/toolkit';\n\nexport default function OrganizationPage() {\n  const organization: Organization | undefined = useAppSelector(selectOrgState);\n  const dispatch = useAppDispatch();\n  const [userName, setUserName] = useState<string>('');\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: 'UserName',\n        accessor: 'userName',\n      },\n    ],\n    []\n  );\n  function validateForm() {\n    return validateEmail(userName);\n  }\n\n  const validateEmail = (email: string) => {\n    return String(email)\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n  };\n  async function handleSubmit(event: React.SyntheticEvent<HTMLFormElement>) {\n    setIsLoading(true);\n    event.preventDefault();\n    const action = await dispatch(createUser({ orgId: organization?.orgId!, userName }));\n\n    setIsLoading(false);\n    const fulfilled = isFulfilled(action);\n    if (fulfilled) {\n      alert('Successfully added user');\n      await dispatch(fetchOrganization());\n      setUserName('');\n    } else {\n      alert('There was a problem adding the user, please try again');\n    }\n  }\n\n  useEffect(() => {\n    dispatch(fetchOrganization());\n  }, []);\n\n  return (\n    <div className='Organization container py-3'>\n      <NavBar />\n      {organization ? (\n        <div>\n          <DataTable\n            title='Compoze Labs Users'\n            columns={columns}\n            data={organization.users}\n            onClick={() => {}}\n          />\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId='accountId'>\n              <Form.Label>Email Address</Form.Label>\n              <Form.Text>\n                {' '}\n                We'll send an email to this address to signup for the Compoze Platform\n              </Form.Text>\n              <Form.Control\n                autoFocus\n                type='userName'\n                value={userName}\n                onChange={(e) => setUserName(e.target.value)}\n              />\n            </Form.Group>\n            <Button\n              isLoading={isLoading}\n              className='addButton'\n              type='submit'\n              disabled={!validateForm()}\n            >\n              Send Invite\n            </Button>\n          </Form>\n        </div>\n      ) : (\n        <div>\n          Loading <Spinner />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}